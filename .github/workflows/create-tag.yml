name: Create Tag

on:
  push:
    branches: [master]
    paths-ignore:
      - '.github/**'
      - '**/AUTHORS.md'
      - '**/LICENSE'
      - '**/README.md'

jobs:
  create-tag:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4
      - name: Get Info
        run: |
          echo "version=$(grep -Eo '[0-9]+(\.[0-9]+)+' CHANGELOG.md | head -n 1)" >> $GITHUB_OUTPUT
        id: info
      - name: Create Tag
        uses: actions/github-script@v7
        with:
          script: |
            github.rest.git.createRef({
              owner: context.repo.owner,
              repo: context.repo.repo,
              ref: 'refs/tags/v${{ steps.info.outputs.version }}',
              sha: context.sha
            })
